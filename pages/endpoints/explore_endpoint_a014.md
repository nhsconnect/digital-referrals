---
title: "A014: Reject Referral"
keywords: endpoint, catalogue
sidebar: overview_sidebar
toc: false
permalink: explore_endpoint_a014.html
summary: false
---

##### Status: ![Beta](images/icons/api_beta.png)  

## API URL

Base URL (Dev3): https://api.dev3.ers.ncrs.nhs.uk/ers-api/

| Method       | URL | Authentication |
| -------------| --- | ---------------- |
| POST | v1/ReferralRequest/{UBRN}/$ers.rejectReferral | Session Token [(Details)](develop_business_flow_bf001.html) |

## Description
This API will reject a referral request in e-RS based on the included UBRN, rejection reason and optional comments.  

## Related FHIR model
- [eRS-RejectReferral-Operation-1](https://fhir.nhs.uk/STU3/OperationDefinition/eRS-RejectReferral-Operation-1)  

### Request Operation
#### Request Header
Provide ASID for the end-point system, the Session Key and the VersionId of the Referral.

| Field Name | Value |
| ---------- | ----- |
| XAPI_ASID | The "Accredited System ID" issued to the third party |
| HTTP_X_SESSION_KEY | The session key generated by the Create Session endpoint (A001)  |
| Accept | `*/*`, `application/fhir+json` |
| If-Match | W/"`n`" |

Note: `n` is the VersionId of the Referral and this can be retrieved by fetching the Referral details. It must be the ID of the latest version of the referral in e-RS.

#### Request Body
Provide reject details such as reject reason and reject comment.

#### Examples
<details><summary>Request Body for a Directly Bookable Service (DBS)</summary>
<br>
```javascript
{
  "resourceType": "Parameters",
  "parameter": [
    {
      "name": "rejectionReason",
      "valueString": "FURTHER_INFORMATION_REQUIRED"
    },
    {
      "name": "rejectionComments",
      "valueString": "This is a test comment."
    }
  ]
}
```
</details>

<details><summary>Request Body for an Indirectly Bookable Service (IBS)</summary>
<br>
```javascript
{
  "resourceType": "Parameters",
  "parameter": [
    {
      "name": "rejectionReason",
      "valueString": "FURTHER_INFORMATION_REQUIRED"
    },
    {
      "name": "rejectionComments",
      "valueString": "This is a test comment."
    },
    {
      "name": "appointmentCancelledinPAS",
      "valueBoolean": false
    }
  ]
}
```
</details>

### Response

#### Success
If successful the referral is rejected. The response code `200 (OK)` is returned. This response has no body.  

#### Failure
If an error occurs, the relating [HTTP status code](explore_error_messages.html) will be returned in the header.
Where status code 422 (Unprocessable Entity) is returned then an [eRS-OperationOutcome-1](https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1) will be included in the body, as detailed below.  

| issue.details.code | Description |
| ------------------ | ------ |
|FIELD_NOT_PERMITTED |the referral is booked at a directly bookable service, and the appointmentCancelledInPas flag is provided|
| INVALID_REQUEST_STATE | The referral is not in a 'Pending Review' state; or: the appointment has been cancelled or marked as DNA; or: the appointment is now in the past; or: the referrer indicated that they intend to add a referral letter and they haven't done so yet |
| NO_RELATIONSHIP | The user is not authorised to view the referral, possibly because it is not yet/no longer booked into the service |
|PATIENT_ERROR | There was a problem with the patientâ€™s record in PDS. The patient is not eligible to be referred via e-RS while this problem persists |
| VALUE_IS_REQUIRED | The rejection reason selected requires rejection comments, but these were not provided; or: the referral is booked at an indirectly bookable service, and the appointmentCancelledInPas flag is not provided |  

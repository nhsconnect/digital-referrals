---
title: "A020: Upload file to the e-RS document store"
keywords: endpoint, catalogue, upload, file, referral letter, referrer clinical information
sidebar: overview_sidebar
toc: false
permalink: /explore_endpoint_a020.html
summary: false
---

### API URL

<!-- Base URL (Dev3): `https://api.dev3.ers.ncrs.nhs.uk` -->

| Method | URL | Authentication |
| -------------| --- | ---------------- |
| POST | /ers-api/STU3/V1/Binary | Session Token [(Details)](develop_business_flow_bf001.html) |

### Description
As a Referring Clinician (/Administrator)  
I want to upload a file to the e-RS document store
so that I can then link it to a referral as part of its referral letter

This endpoint is to be used as part of the [Maintain Referral Letter](placeholder)
Please note that each file needs to be individually uploaded first, and then a

### Prerequisite Operations
This endpoint has no pre-requisistes

### Request Operation

#### Request Header

| Field Name | Value |
| ---- | ---- |
| XAPI_ASID | The "Accredited System ID" issued to the third party |
| HTTP_X_SESSION_KEY | The session key generated by the Create Session endpoint (A001)  |
| XAPI_FQDN | The "common name" of the API-specific endpoint certificate issued to the third party |
| X-ERS-XAPI-META-FILE_NAME  | The name of file being uploaded, including the extension|
| X-ERS-XAPI-META-INTENDED_UBRN | (not yet supported) The UBRN for the referral which the documents are intended for |
| Accept | `*/*`, `application/json+fhir` |
|Content-Type |	The mime type of the file being uoploaded |



#### Request Body
The binary stream of the file being uploaded

##### Example code

<details><summary>Request Header</summary>
<br>
  <pre>
    EXAMPLE CODE HERE
  </pre>
</details>

<details><summary>Request Body</summary>
<br>
  <pre>
    EXAMPLE CODE HERE
  </pre>
</details>
<br>

### Response

#### Success
HTTP Status code `200 (OK)` is returned. The header will also contain the e-RS file ID of the just uploaded file.
No response body is returned.

##### Example code
<details><summary>Response Header</summary>
<br>
  <pre>
    EXAMPLE CODE HERE
  </pre>
</details>
<br>

#### Failure
If an error occurs, the relating [HTTP status code](explore_error_messages.html) will be returned in the header.
Where status code 422 (Unprocessable Entity) is returned then an [eRS-OperationOutcome-1](https://fhir.nhs.uk/STU3/StructureDefinition/eRS-OperationOutcome-1) will be included in the body, as detailed below.  

| issue.details.code | Description |
| ------------------ | ------ |
| CONFLICTING_VALUES | The file extension is not compatible with the file mime type |
| FILE_SIZE_ERROR | The file is too large; the max size is 5MB |
| INAPPROPRIATE_VALUE | The mime type is not supported |
| INVALID_VALUE | If the total length of the File Name including extension is greater than 255 characters |
| MISSING_VALUE | File name,  file mime type or the file data are not supplied |
